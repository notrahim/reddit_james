{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\src\\\\components\\\\Post\\\\Vote\\\\Component.js\";\nimport React from 'react';\nimport PostVoteUpvote from './Upvote';\nimport PostVoteDownvote from './Downvote';\n\nvar Wrapper = _styled.div.withConfig({\n  displayName: \"Component__Wrapper\",\n  componentId: \"sc-u4f6mz-0\"\n})([\"display:flex;flex-direction:column;align-items:center;width:30px;padding:4px;font-size:12px;line-height:25px;font-weight:500;text-align:center;color:\", \";\"], function (props) {\n  return props.theme.normalText;\n});\n\nvar PostVote =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PostVote, _React$Component);\n\n  function PostVote(props) {\n    var _this;\n\n    _classCallCheck(this, PostVote);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PostVote).call(this, props));\n\n    _this.upvote = function () {\n      return _this.castVote(_this.state.didUpvote ? 0 : 1);\n    };\n\n    _this.downvote = function () {\n      return _this.castVote(_this.state.didDownvote ? 0 : -1);\n    };\n\n    var didVote = PostVote.existingVote(props);\n    _this.state = {\n      score: props.score,\n      didVote: didVote,\n      didUpvote: didVote === 1,\n      didDownvote: didVote === -1\n    };\n    return _this;\n  }\n\n  _createClass(PostVote, [{\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate(nextProps, nextState, nextContext) {\n      if (this.props.score !== nextProps.score) {\n        var didVote = PostVote.existingVote(nextProps);\n        this.setState({\n          score: nextProps.score,\n          didVote: didVote,\n          didUpvote: didVote === 1,\n          didDownvote: didVote === -1\n        });\n      } else if (this.props.token !== nextProps.token && !nextProps.token) {\n        this.setState({\n          didVote: false,\n          didUpvote: false,\n          didDownvote: false\n        });\n      }\n    }\n  }, {\n    key: \"castVote\",\n    value: function castVote(vote) {\n      var _this$props = this.props,\n          attemptVote = _this$props.attemptVote,\n          id = _this$props.id,\n          token = _this$props.token;\n\n      if (token) {\n        attemptVote(id, vote);\n        this.setState({\n          score: this.state.score + vote - this.state.didVote,\n          didVote: vote,\n          didUpvote: vote === 1,\n          didDownvote: vote === -1\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(PostVoteUpvote, {\n        canVote: !!this.props.token,\n        didVote: this.state.didUpvote,\n        onClick: this.upvote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.score), React.createElement(PostVoteDownvote, {\n        canVote: !!this.props.token,\n        didVote: this.state.didDownvote,\n        onClick: this.downvote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"existingVote\",\n    value: function existingVote(_ref) {\n      var user = _ref.user,\n          votes = _ref.votes;\n      var existingVote = user && votes && votes.find(function (vote) {\n        return vote.user === user.id;\n      });\n      return existingVote ? existingVote.vote : 0;\n    }\n  }]);\n\n  return PostVote;\n}(React.Component);\n\nexport default PostVote;","map":{"version":3,"sources":["C:\\Users\\Techdotpk\\Desktop\\client\\src\\components\\Post\\Vote\\Component.js"],"names":["React","PostVoteUpvote","PostVoteDownvote","Wrapper","styled","div","props","theme","normalText","PostVote","upvote","castVote","state","didUpvote","downvote","didDownvote","didVote","existingVote","score","nextProps","nextState","nextContext","setState","token","vote","attemptVote","id","user","votes","find","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components/macro';\nimport PostVoteUpvote from './Upvote';\nimport PostVoteDownvote from './Downvote';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 30px;\n  padding: 4px;\n  font-size: 12px;\n  line-height: 25px;\n  font-weight: 500;\n  text-align: center;\n  color: ${props => props.theme.normalText};\n`;\n\nclass PostVote extends React.Component {\n  constructor(props) {\n    super(props);\n    const didVote = PostVote.existingVote(props);\n    this.state = {\n      score: props.score,\n      didVote,\n      didUpvote: didVote === 1,\n      didDownvote: didVote === -1\n    };\n  }\n\n  static existingVote({ user, votes }) {\n    const existingVote =\n      user && votes && votes.find(vote => vote.user === user.id);\n    return existingVote ? existingVote.vote : 0;\n  }\n\n  componentWillUpdate(nextProps, nextState, nextContext) {\n    if (this.props.score !== nextProps.score) {\n      const didVote = PostVote.existingVote(nextProps);\n      this.setState({\n        score: nextProps.score,\n        didVote,\n        didUpvote: didVote === 1,\n        didDownvote: didVote === -1\n      });\n    } else if (this.props.token !== nextProps.token && !nextProps.token) {\n      this.setState({\n        didVote: false,\n        didUpvote: false,\n        didDownvote: false\n      });\n    }\n  }\n\n  castVote(vote) {\n    const { attemptVote, id, token } = this.props;\n    if (token) {\n      attemptVote(id, vote);\n      this.setState({\n        score: this.state.score + vote - this.state.didVote,\n        didVote: vote,\n        didUpvote: vote === 1,\n        didDownvote: vote === -1\n      });\n    }\n  }\n\n  upvote = () => this.castVote(this.state.didUpvote ? 0 : 1);\n\n  downvote = () => this.castVote(this.state.didDownvote ? 0 : -1);\n\n  render() {\n    return (\n      <Wrapper>\n        <PostVoteUpvote\n          canVote={!!this.props.token}\n          didVote={this.state.didUpvote}\n          onClick={this.upvote}\n        />\n        <span>{this.state.score}</span>\n        <PostVoteDownvote\n          canVote={!!this.props.token}\n          didVote={this.state.didDownvote}\n          onClick={this.downvote}\n        />\n      </Wrapper>\n    );\n  }\n}\n\nexport default PostVote;\n"]},"metadata":{},"sourceType":"module"}