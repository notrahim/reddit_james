{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Techdotpk\\\\Desktop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:8080/api' : \"https://\".concat(window.location.hostname, \"/api\");\nvar methods = {\n  get: function () {\n    var _get = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(endpoint) {\n      var token,\n          options,\n          response,\n          json,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              token = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n              options = {\n                method: 'GET',\n                headers: _objectSpread({}, token && {\n                  Authorization: \"Bearer \".concat(token)\n                })\n              };\n              _context.next = 4;\n              return fetch(\"\".concat(baseUrl, \"/\").concat(endpoint), options);\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              json = _context.sent;\n\n              if (response.ok) {\n                _context.next = 10;\n                break;\n              }\n\n              throw Error(json.message);\n\n            case 10:\n              return _context.abrupt(\"return\", json);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function get(_x) {\n      return _get.apply(this, arguments);\n    }\n\n    return get;\n  }(),\n  post: function () {\n    var _post = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(endpoint, body) {\n      var token,\n          options,\n          response,\n          json,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              token = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : null;\n              options = {\n                method: 'POST',\n                headers: _objectSpread({\n                  'Content-Type': 'application/json'\n                }, token && {\n                  Authorization: \"Bearer \".concat(token)\n                }),\n                body: JSON.stringify(body)\n              };\n              _context2.next = 4;\n              return fetch(\"\".concat(baseUrl, \"/\").concat(endpoint), options);\n\n            case 4:\n              response = _context2.sent;\n              _context2.next = 7;\n              return response.json();\n\n            case 7:\n              json = _context2.sent;\n\n              if (response.ok) {\n                _context2.next = 11;\n                break;\n              }\n\n              if (response.status === 422) {\n                json.errors.forEach(function (error) {\n                  throw Error(\"\".concat(error.param, \" \").concat(error.msg));\n                });\n              }\n\n              throw Error(json.message);\n\n            case 11:\n              return _context2.abrupt(\"return\", json);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function post(_x2, _x3) {\n      return _post.apply(this, arguments);\n    }\n\n    return post;\n  }(),\n  delete: function () {\n    var _delete2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(endpoint) {\n      var token,\n          options,\n          response,\n          json,\n          _args3 = arguments;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              token = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : null;\n              options = {\n                method: 'DELETE',\n                headers: _objectSpread({\n                  'Content-Type': 'application/json'\n                }, token && {\n                  Authorization: \"Bearer \".concat(token)\n                })\n              };\n              _context3.next = 4;\n              return fetch(\"\".concat(baseUrl, \"/\").concat(endpoint), options);\n\n            case 4:\n              response = _context3.sent;\n              _context3.next = 7;\n              return response.json();\n\n            case 7:\n              json = _context3.sent;\n\n              if (response.ok) {\n                _context3.next = 12;\n                break;\n              }\n\n              if (!(response.status === 401)) {\n                _context3.next = 11;\n                break;\n              }\n\n              throw Error('unauthorized');\n\n            case 11:\n              throw Error(json.message);\n\n            case 12:\n              return _context3.abrupt(\"return\", json);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function _delete(_x4) {\n      return _delete2.apply(this, arguments);\n    }\n\n    return _delete;\n  }()\n};\nexport function login(_x5, _x6) {\n  return _login.apply(this, arguments);\n}\n\nfunction _login() {\n  _login = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(username, password) {\n    var json;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return methods.post('login', {\n              username: username,\n              password: password\n            });\n\n          case 2:\n            json = _context4.sent;\n            return _context4.abrupt(\"return\", json.token);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n  return _login.apply(this, arguments);\n}\n\nexport function signup(_x7, _x8) {\n  return _signup.apply(this, arguments);\n}\n\nfunction _signup() {\n  _signup = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(username, password) {\n    var json;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return methods.post('register', {\n              username: username,\n              password: password\n            });\n\n          case 2:\n            json = _context5.sent;\n            return _context5.abrupt(\"return\", json.token);\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this);\n  }));\n  return _signup.apply(this, arguments);\n}\n\nexport function getPosts(_x9) {\n  return _getPosts.apply(this, arguments);\n}\n\nfunction _getPosts() {\n  _getPosts = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(category) {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return methods.get(\"posts/\".concat(category));\n\n          case 2:\n            return _context6.abrupt(\"return\", _context6.sent);\n\n          case 3:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this);\n  }));\n  return _getPosts.apply(this, arguments);\n}\n\nexport function getProfile(_x10) {\n  return _getProfile.apply(this, arguments);\n}\n\nfunction _getProfile() {\n  _getProfile = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(username) {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return methods.get(\"user/\".concat(username));\n\n          case 2:\n            return _context7.abrupt(\"return\", _context7.sent);\n\n          case 3:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, this);\n  }));\n  return _getProfile.apply(this, arguments);\n}\n\nexport function getPost(_x11) {\n  return _getPost.apply(this, arguments);\n}\n\nfunction _getPost() {\n  _getPost = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee8(id) {\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return methods.get(\"post/\".concat(id));\n\n          case 2:\n            return _context8.abrupt(\"return\", _context8.sent);\n\n          case 3:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, this);\n  }));\n  return _getPost.apply(this, arguments);\n}\n\nexport function createPost(_x12, _x13) {\n  return _createPost.apply(this, arguments);\n}\n\nfunction _createPost() {\n  _createPost = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee9(body, token) {\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return methods.post('posts', body, token);\n\n          case 2:\n            return _context9.abrupt(\"return\", _context9.sent);\n\n          case 3:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9, this);\n  }));\n  return _createPost.apply(this, arguments);\n}\n\nexport function deletePost(_x14, _x15) {\n  return _deletePost.apply(this, arguments);\n}\n\nfunction _deletePost() {\n  _deletePost = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee10(id, token) {\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.next = 2;\n            return methods.delete(\"post/\".concat(id), token);\n\n          case 2:\n            return _context10.abrupt(\"return\", _context10.sent);\n\n          case 3:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10, this);\n  }));\n  return _deletePost.apply(this, arguments);\n}\n\nexport function createComment(_x16, _x17, _x18) {\n  return _createComment.apply(this, arguments);\n}\n\nfunction _createComment() {\n  _createComment = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee11(post, comment, token) {\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return methods.post(\"post/\".concat(post), comment, token);\n\n          case 2:\n            return _context11.abrupt(\"return\", _context11.sent);\n\n          case 3:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, this);\n  }));\n  return _createComment.apply(this, arguments);\n}\n\nexport function deleteComment(_x19, _x20, _x21) {\n  return _deleteComment.apply(this, arguments);\n}\n\nfunction _deleteComment() {\n  _deleteComment = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee12(post, comment, token) {\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.next = 2;\n            return methods.delete(\"post/\".concat(post, \"/\").concat(comment), token);\n\n          case 2:\n            return _context12.abrupt(\"return\", _context12.sent);\n\n          case 3:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12, this);\n  }));\n  return _deleteComment.apply(this, arguments);\n}\n\nexport function castVote(_x22, _x23, _x24) {\n  return _castVote.apply(this, arguments);\n}\n\nfunction _castVote() {\n  _castVote = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee13(id, vote, token) {\n    var voteTypes, voteType;\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            voteTypes = {\n              '1': 'upvote',\n              '0': 'unvote',\n              '-1': 'downvote'\n            };\n            voteType = voteTypes[vote];\n            _context13.next = 4;\n            return methods.get(\"post/\".concat(id, \"/\").concat(voteType), token);\n\n          case 4:\n            return _context13.abrupt(\"return\", _context13.sent);\n\n          case 5:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13, this);\n  }));\n  return _castVote.apply(this, arguments);\n}","map":{"version":3,"sources":["C:\\Users\\Techdotpk\\Desktop\\client\\src\\util\\api.js"],"names":["baseUrl","process","env","NODE_ENV","window","location","hostname","methods","get","endpoint","token","options","method","headers","Authorization","fetch","response","json","ok","Error","message","post","body","JSON","stringify","status","errors","forEach","error","param","msg","delete","login","username","password","signup","getPosts","category","getProfile","getPost","id","createPost","deletePost","createComment","comment","deleteComment","castVote","vote","voteTypes","voteType"],"mappings":"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","sourcesContent":["const baseUrl =\n  process.env.NODE_ENV === 'development'\n    ? 'http://localhost:8080/api'\n    : `https://${window.location.hostname}/api`;\n\nconst methods = {\n  get: async function (endpoint, token = null) {\n    const options = {\n      method: 'GET',\n      headers: {\n        ...(token && { Authorization: `Bearer ${token}` })\n      }\n    };\n\n    const response = await fetch(`${baseUrl}/${endpoint}`, options);\n    const json = await response.json();\n\n    if (!response.ok) throw Error(json.message);\n\n    return json;\n  },\n\n  post: async function (endpoint, body, token = null) {\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && { Authorization: `Bearer ${token}` })\n      },\n      body: JSON.stringify(body)\n    };\n\n    const response = await fetch(`${baseUrl}/${endpoint}`, options);\n    const json = await response.json();\n\n    if (!response.ok) {\n      if (response.status === 422) {\n        json.errors.forEach(error => {\n          throw Error(`${error.param} ${error.msg}`);\n        });\n      }\n\n      throw Error(json.message);\n    }\n\n    return json;\n  },\n\n  delete: async function (endpoint, token = null) {\n    const options = {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && { Authorization: `Bearer ${token}` })\n      }\n    };\n\n    const response = await fetch(`${baseUrl}/${endpoint}`, options);\n    const json = await response.json();\n\n    if (!response.ok) {\n      if (response.status === 401) throw Error('unauthorized');\n      throw Error(json.message);\n    }\n\n    return json;\n  }\n};\n\nexport async function login (username, password) {\n  const json = await methods.post('login', { username, password });\n  return json.token;\n}\n\nexport async function signup (username, password) {\n  const json = await methods.post('register', { username, password });\n  return json.token;\n}\n\nexport async function getPosts (category) {\n  return await methods.get(`posts/${category}`);\n}\n\nexport async function getProfile (username) {\n  return await methods.get(`user/${username}`);\n}\n\nexport async function getPost (id) {\n  return await methods.get(`post/${id}`);\n}\n\nexport async function createPost (body, token) {\n  return await methods.post('posts', body, token);\n}\n\nexport async function deletePost (id, token) {\n  return await methods.delete(`post/${id}`, token);\n}\n\nexport async function createComment (post, comment, token) {\n  return await methods.post(`post/${post}`, comment, token);\n}\n\nexport async function deleteComment (post, comment, token) {\n  return await methods.delete(`post/${post}/${comment}`, token);\n}\n\nexport async function castVote (id, vote, token) {\n  const voteTypes = {\n    '1': 'upvote',\n    '0': 'unvote',\n    '-1': 'downvote'\n  };\n\n  const voteType = voteTypes[vote];\n\n  return await methods.get(`post/${id}/${voteType}`, token);\n}\n"]},"metadata":{},"sourceType":"module"}